<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://kvsingh.github.io/theme/css/style.less">
  <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="icon" type="image/vnd.microsoft.icon" href="https://kvsingh.github.io/">
  <link rel="stylesheet" type="text/css" href="https://kvsingh.github.io/theme/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="https://kvsingh.github.io/theme/css/style.min.css">
  <link rel="stylesheet" type="text/css" href="https://kvsingh.github.io/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto+Mono">
  <link rel="stylesheet" type="text/css" href="https://kvsingh.github.io/theme/css/fontawesome-all.min.css">
  <link rel="stylesheet" type="text/css" href="https://kvsingh.github.io/theme/css/hatena-bookmark-icon.css">


  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Karanveer Singh">
  <meta name="description" content="Posts and writings by Karanveer Singh">

  <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="UnInhibited Zombie Atom" />
  <link href="http://localhost:8000/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="UnInhibited Zombie RSS" />

<meta name="keywords" content="python, pandas, data-analysis, facebook">

  <title>
    UnInhibited Zombie
&ndash; Analyzing my Facebook posts through the years  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-41437726-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <main>
    <header>
      <div class="site-name">
        <a href="https://kvsingh.github.io">UnInhibited Zombie</a>
      </div>
      <p>
        <a href="https://kvsingh.github.io/archives.html"><i class="fab fas-archive"></i> Archive</a>
      </p>
    </header>

<article>
  <div class="article__title">
    <h1><a href="https://kvsingh.github.io/drafts/fb-posts-through-years.html">Analyzing my Facebook posts through the years</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: Tue 11 July 2017</p>
 Tags:
      <a href="https://kvsingh.github.io/tag/python.html">#python</a>,      <a href="https://kvsingh.github.io/tag/pandas.html">#pandas</a>,      <a href="https://kvsingh.github.io/tag/data-analysis.html">#data-analysis</a>,      <a href="https://kvsingh.github.io/tag/facebook.html">#facebook</a>    </p>
  </div>
  <div class="article__text">
    
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For the longest time, I've been wanting to do some analysis using facebook graph API. One of the domains which really excites me, in terms of analysing data and deriving conclusions from it, is studying data related to human behaviour. And what better source of such information do we have other than facebook?  I mean, it has more than <a href="https://en.wikipedia.org/wiki/List_of_virtual_communities_with_more_than_100_million_active_users">2 billion monthly active users</a>. It is a cesspool of narcissicm where people share their important moments.</p>
<p>I can definitely acknowledge that the dopamine rush which facebook provides is a bit "dangerous", its almost like a drug, and is prone to addiction like any other feel good activity. But when used in moderation, it provides benefits like any other drugs - a place to express yourself and share stories in a world which is becoming less social by the minute.</p>
<p>However, this raises the important question of privacy, and facebook has recognized the importance of that by modifying its API over the years. While earlier it was easy to access users' public information by using the API, now it requires the user to authenticate before you can access even the public information. Unfortunately, that makes it difficult for people like me who are looking to use other people's data to derive generalized insights. So, until I'm able to convince a considerable number of people to give their precious data, I decided to work on what I had - my own data. I decided to analyze my posts over the years to see if I could find some patterns.</p>
<p>To start with, we try to answer the question : what are the features which describe a facebook post? I came up with the following answers:</p>
<ul>
<li>Number of likes</li>
<li>Length of the post</li>
<li>Time of the post (Month, Day of week, Time of day)</li>
<li>Content of the post </li>
</ul>
<p>Next, use facebook's graph API to get the above data, and write it to a csv file. If you want to do this for your own facebook statuses, you'll need an FB API user access token (I generated mine via the <a href="https://developers.facebook.com/tools/explorer/145634995501895/">Graph API Explorer</a>). You'll also need a <a href="https://developers.facebook.com/">Facebook developer account</a> for this.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">facebook</span><span class="o">,</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">textblob</span> <span class="kn">import</span> <span class="n">TextBlob</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data-statuses.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s1">&#39;polarity&#39;</span><span class="p">,</span> <span class="s1">&#39;subjectivity&#39;</span><span class="p">,</span> <span class="s1">&#39;num_reactions&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">,</span> <span class="s1">&#39;num_words&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;dow&#39;</span><span class="p">,</span> <span class="s1">&#39;tod&#39;</span><span class="p">])</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">facebook</span><span class="o">.</span><span class="n">GraphAPI</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="s1">&#39;youraccesstoken&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;2.8&#39;</span><span class="p">)</span>
<span class="n">posts</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">get_all_connections</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="n">connection_name</span><span class="o">=</span><span class="s1">&#39;posts&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">post_id</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>

        <span class="n">time_string</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;created_time&#39;</span><span class="p">][:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">time_string</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S&#39;</span><span class="p">)</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>

        <span class="n">blob</span> <span class="o">=</span> <span class="n">TextBlob</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
        <span class="n">polarity</span><span class="p">,</span> <span class="n">subjectivity</span> <span class="o">=</span> <span class="n">blob</span><span class="o">.</span><span class="n">sentiment</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
        <span class="n">num_words</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
        <span class="n">post_reactions</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">get_all_connections</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">post_id</span><span class="p">,</span> <span class="n">connection_name</span><span class="o">=</span><span class="s2">&quot;reactions&quot;</span><span class="p">)</span>
        <span class="n">num_reactions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">post_reactions</span><span class="p">)</span>

        <span class="n">month</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">month</span>
        <span class="n">dow</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
        <span class="n">tod</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">hour</span>

        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">polarity</span><span class="p">,</span> <span class="n">subjectivity</span><span class="p">,</span> <span class="n">num_reactions</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">num_words</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">dow</span><span class="p">,</span> <span class="n">tod</span><span class="p">])</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">continue</span>
</pre></div>
<p>Now, lets start the analysis. We use pandas to load the data in the csv file to a dataframe.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data-statuses.csv&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="k">print</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>   polarity  subjectivity  num_reactions  length  num_words  month  dow  tod
0  0.125000      0.458333             18     312         59      7    4   20
1 -0.245833      0.320833              1     107         18      7    3   19
2 -0.400000      0.400000             50      56          7      7    3   12
3  0.000000      0.000000              0       6          1      6    6   16
4  0.000000      0.000000              3       1          1      6    0   18
(703, 8)
</pre>
</div>
</div>

</div>
</div>

</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

  </div>
  <div id="article__comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "drafts/fb-posts-through-years.html";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//inzombies.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


  </main>
    <footer>
      <div class="author__logo">
          <img src="https://kvsingh.github.io/theme/images/logo.png" alt="logo">
      </div>
      <section class="author">
        <div class="author__name">
          <a href="https://kvsingh.github.io/pages/about.html">Karanveer Singh</a>
          <p></p>
        </div>
        <div class="author__link">
          <ul>
            <li><a href="http://getpelican.com/" title="Pelican"><i class="fab fa-link"></i></a></li>
            <li><a href="http://python.org/" title="Python.org"><i class="fab fa-link"></i></a></li>
            <li><a href="http://jinja.pocoo.org/" title="Jinja2"><i class="fab fa-link"></i></a></li>
            <li><a href="#" title="You can modify those links in your config file"><i class="fab fa-link"></i></a></li>
            <li>
              <a href="https://github.com/kvsingh/" target="_blank" title="github">
                <i class="fab fa-github-square"></i>
              </a>
            </li>
            <li>
              <a href="https://soundcloud.com/unzombie" target="_blank" title="soundcloud">
              </a>
            </li>
            <li>
              <a href="https://kvsingh.github.io/feeds/all.rss.xml" target="_blank" title="rss">
              </a>
            </li>
            <li>
              <a href="http://localhost:8000/feeds/all.atom.xml" target="_blank" title="Feed">
                <i class="fas fa-rss-square"></i>
              </a>
            </li>
          </ul>
        </div>
      </section>
      <div class="ending-message">
        <p>&copy; Karanveer Singh. Powered by <a href="http://getpelican.com" target="_blank">Pelican</a>, Theme is using <a href="https://github.com/laughk/pelican-hss" target="_blank">HSS</a>. </p>
      </div>
    </footer>
</body>
</html>